(()=>{"use strict";var t={249:t=>{t.exports=require("eslint")},265:function(t,e,r){var o,n=this&&this.__createBinding||(Object.create?function(t,e,r,o){void 0===o&&(o=r);var n=Object.getOwnPropertyDescriptor(e,r);n&&!("get"in n?!e.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,o,n)}:function(t,e,r,o){void 0===o&&(o=r),t[o]=e[r]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),a=this&&this.__importStar||(o=function(t){return o=Object.getOwnPropertyNames||function(t){var e=[];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[e.length]=r);return e},o(t)},function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r=o(t),a=0;a<r.length;a++)"default"!==r[a]&&n(e,t,r[a]);return i(e,t),e});Object.defineProperty(e,"__esModule",{value:!0}),e.activate=function(t){console.log("SyntaxilitY Code Formatter is now active!");const e=s.workspace.getConfiguration("syntaxilityCodeFormatter"),r=e.get("formatters",{}),o=e.get("preCommitHook",!0);let n=s.commands.registerCommand("syntaxilityCodeFormatter.formatDocument",(async()=>{const t=s.window.activeTextEditor;if(!t)return void s.window.showErrorMessage("No active editor found!");const{document:e,selections:o}=t,n=e.getText(),i=e.languageId,a=s.workspace.rootPath||"";try{let d=n,w=r[i]||function(t){return{javascript:"prettier",typescript:"eslint",python:"black",cpp:"clang-format",go:"gofmt",rust:"rustfmt",java:"google-java-format",sql:"sql-formatter",yaml:"prettier",markdown:"markdown-it"}[t]||"prettier"}(i);if(g(w)||(s.window.showWarningMessage(`Formatter "${w}" not found. Using fallback: Prettier.`),w="prettier"),"prettier"===w){if(!g("prettier"))return void s.window.showErrorMessage("Prettier is not installed! Install it using `npm install -g prettier`.");const t=m.join(a,".prettierrc.json"),e=l.existsSync(t)?JSON.parse(l.readFileSync(t,"utf8")):{parser:p(i)};d=await c.format(n,e)}if("eslint"===w){if(!g("eslint"))return void s.window.showErrorMessage("ESLint is not installed! Install it using `npm install -g eslint`.");const t=new u.ESLint({fix:!0}),e=await t.lintText(d);d=e[0].output||d}d=function(t,e){try{return(0,f.execSync)(t,{input:e,encoding:"utf8"})}catch(r){return console.error(`Error running formatter ${t}:`,r),e}}(w,d),t.edit((t=>{o.forEach((r=>{t.replace(r.isEmpty?new s.Range(0,0,e.lineCount,0):r,d)}))})),s.window.showInformationMessage(`Formatted with ${w}!`)}catch(t){console.error("SyntaxilitY Code Formatter Error:",t),s.window.showErrorMessage(`Formatting failed: ${t.message}`)}}));s.workspace.onWillSaveTextDocument((t=>{e.get("autoFormatOnSave",!0)&&s.commands.executeCommand("syntaxilityCodeFormatter.formatDocument")})),o&&function(){const t=s.workspace.rootPath;if(!t)return;const e=m.join(t,".git","hooks","pre-commit");if(l.existsSync(e))return;l.writeFileSync(e,'#!/bin/sh\n  echo "Running SyntaxilitY Code Formatter before commit..."\n  npx syntaxility-code-formatter || echo "Formatting failed, skipping commit."\n  git add .\n  '),l.chmodSync(e,"755"),s.window.showInformationMessage("Git pre-commit hook installed for auto-formatting.")}(),t.subscriptions.push(n)},e.deactivate=function(){};const s=a(r(398)),c=a(r(459)),u=r(249),l=a(r(896)),m=a(r(928)),f=r(317),d=a(r(857));function p(t){switch(t){case"javascript":case"typescript":default:return"babel";case"json":return"json";case"html":return"html";case"css":case"scss":case"less":return"css";case"yaml":return"yaml";case"markdown":return"markdown"}}function g(t){try{const e="win32"===d.platform()?`where ${t}`:`which ${t}`;return(0,f.execSync)(e,{stdio:"ignore"}),!0}catch{return!1}}},317:t=>{t.exports=require("child_process")},398:t=>{t.exports=require("vscode")},459:t=>{t.exports=require("prettier")},857:t=>{t.exports=require("os")},896:t=>{t.exports=require("fs")},928:t=>{t.exports=require("path")}},e={},r=function r(o){var n=e[o];if(void 0!==n)return n.exports;var i=e[o]={exports:{}};return t[o].call(i.exports,i,i.exports,r),i.exports}(265);module.exports=r})();